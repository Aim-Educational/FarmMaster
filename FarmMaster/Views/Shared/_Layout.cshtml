@inject SignInManager<ApplicationUser> signIn
@inject UserManager<ApplicationUser> users
@using FarmMaster.Constants

@{
    var identityUser = await users.GetUserAsync(User);

    Func<IEnumerable<string>, bool> isInRoleImpl = roles =>
    {
        return roles.All(r => users.IsInRoleAsync(identityUser, r).Result);
    };

    Func<IEnumerable<string>, string> isInRole = roles =>
    {
        // ASP decides to use "False" and "True" instead of "false"/"true"
        return isInRoleImpl(roles) ? "true" : "false";
    };
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - FarmMaster</title>
    <link rel="stylesheet" href="~/css/bundle.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css" rel="stylesheet">

    <environment include="Development">
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    </environment>
</head>
<body>
    <aside id="leftMenu">
        <h1>
            FarmMaster
        </h1>
        <section v-for="(section, name) in sections"
                 v-if="section.shown"
                 :key="name">
            <header>{{ name }}</header>
            <a v-for="(item, itemName) in section.items"
               v-if="item.shown"
               :key="itemName"
               :href="item.href">
                <div class="indicator"></div>
                <span>{{ itemName }}</span>
                <img width="25" height="25" :src="item.icon" />
            </a>
        </section>
    </aside>
    
    <div class="wrapper">
        <header>
            <div id="leftMenuToggle" class="aside toggle">
                <i class="la la-bars"></i>
                <script>
                    document.getElementById("leftMenuToggle").onclick = () => document.getElementById("leftMenu").classList.toggle("collapsed");
                </script>
            </div>
            <div class="breadcrumb">
                <a class="crumb">
                    Animals
                </a>
                <a class="crumb">
                    Edit
                </a>
                <a class="crumb">
                    Prada
                </a>
            </div>
            <div class="profile">
                @if (signIn.IsSignedIn(User))
                {
                    <div class="name">
                        Logged in as
                        <a href="/Identity/Account/Manage">
                            <strong>@users.GetUserName(User)</strong>
                        </a>
                    </div>
                    <a href="#" class="la la-sign-out-alt"></a>
                }
            </div>
        </header>

        <main role="main">
            @RenderBody()
        </main>
    </div>

    <footer>
    </footer>

    <!--Libraries-->
    <script src="~/js/util.js"></script>

    <!--Navbar JS-->
    <script>
        new Vue({
            el: "#leftMenu",
            data: {
                sections: {
                    admin: {
                        shown: true, //@isInRole(new[] { RoleNames.SUPER_ADMIN }),
                        items: {
                            settings: { shown: true, icon: null, href: "#" }
                        }
                    }
                }
            }
        });
    </script>

    <!--User JS-->
    @RenderSection("Scripts", required: false)
</body>
</html>
