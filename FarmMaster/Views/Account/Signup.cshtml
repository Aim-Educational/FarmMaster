@model  FarmMaster.Models.AccountSignupViewModel
@{
    ViewData["Title"] = "Signup";
    ViewData["WhichPage"] = "Signup";
    Layout = "~/Views/Shared/_LoginFormLayout.cshtml";
}

<form class="ui large form" method="post" asp-action="Signup">
    <section class="ui fluid grid">
        <!--Breadcrumb-->
        <section class="row">
            <section class="left aligned column">
                <section class="ui breadcrumb">
                    <a id="breadcrumbLoginInfo" class="active section">Login Info</a>
                    <i class="right angle icon divider"></i>
                    <a id="breadcrumbContactInfo" class="section">Contact Info</a>
                </section>
            </section>
        </section>

        <!--Forms-->
        <section class="row">
            <!--Login info-->
            <section id="sectionLoginInfo" class="sixteen wide column transition visible">
                <section class="field">
                    <div class="ui left icon input">
                        <i class="user icon"></i>
                        <input asp-for="LoginInfo.Username" placeholder="Username" />
                    </div>
                    <div class="ui basic red pointing prompt label transition hidden"></div>
                </section>
                <section class="field">
                    <div class="ui left icon input">
                        <i class="lock icon"></i>
                        <input asp-for="LoginInfo.Password" placeholder="Password" />
                    </div>
                    <div class="ui basic red pointing prompt label transition hidden"></div>
                </section>
                <section class="field">
                    <div class="ui left icon input">
                        <i class="lock icon"></i>
                        <input asp-for="LoginInfo.PasswordConfirm" placeholder="Confirm Password" />
                    </div>
                    <div class="ui basic red pointing prompt label transition hidden"></div>
                </section>

                <button id="buttonLoginInfoNext" class="ui fluid large primary button" type="button">
                    Next
                </button>
            </section>

            <!--Contact info-->
            <section id="sectionContactInfo" class="sixteen wide left aligned column display none transition hidden">
                <!--Names-->
                <section class="field">
                    <h3 class="ui dividing header">
                        Name
                    </h3>
                    <section class="ui three fields">
                        <section class="field">
                            <input class="ui input" asp-for="Contact.FirstName" placeholder="First Name *" data-validate-direct-parent />
                            <div class="ui basic red pointing prompt label transition hidden"></div>
                        </section>
                        <section class="field">
                            <input class="ui input" asp-for="Contact.MiddleNames" placeholder="[Middle Names]" data-validate-direct-parent />
                            <div class="ui basic red pointing prompt label transition hidden"></div>
                        </section>
                        <section class="field">
                            <input class="ui input" asp-for="Contact.LastName" placeholder="Last Name *" data-validate-direct-parent />
                            <div class="ui basic red pointing prompt label transition hidden"></div>
                        </section>
                    </section>
                </section>

                <!--Contact information-->
                <section class="field">
                    <h3 class="ui dividing header">
                        Contact Information
                    </h3>
                    <section class="field">
                        <input class="ui input" asp-for="Contact.Email" placeholder="Email *"  data-validate-direct-parent />
                        <div class="ui basic red pointing prompt label transition hidden"></div>
                    </section>
                    <section class="field">
                        <input class="ui input" asp-for="TelephoneNumbers" placeholder="Phone Number *"  data-validate-direct-parent />
                        <div class="ui basic red pointing prompt label transition hidden"></div>
                    </section>
                </section>

                <!--Checkboxes-->
                <section class="inline field">
                    <div class="ui checkbox">
                        <input class="hidden" asp-for="ConsentInfo.PrivacyPolicyConsent" />
                        <label>I have read and accept the terms under the Privacy Statement and give consent for my personal data to be stored and processed.</label>
                        <div class="ui basic red pointing prompt  label transition hidden"></div>
                    </div>
                </section>
                <section class="inline field">
                    <div class="ui checkbox">
                        <input class="hidden" asp-for="ConsentInfo.TermsOfServiceConsent" />
                        <label>I have read and accept the terms under the Terms of Service agreement.</label>
                        <div class="ui basic red pointing prompt label transition hidden"></div>
                    </div>
                </section>

                <!--Submit and back button-->
                <section class="two large buttons">
                    <button id="buttonContactInfoBack" class="ui left floated secondary button" type="button">
                        Back
                    </button>
                    <button class="ui right floated primary button" type="submit">
                        Signup
                    </button>
                </section>
            </section>
        </section>
    </section>

    <div id="divAllErrors" class="ui error message"></div>
</form>

@section Scripts {
    <script>
        let sectionState = "login";

        $(".ui.checkbox").checkbox();
        Validation.hookupForm(document.querySelector(".ui.form"));

        $("#breadcrumbLoginInfo, #buttonContactInfoBack")
            .click(function () {
                if (sectionState === "login")
                    return;

                sectionState = "login";

                document.getElementById("breadcrumbLoginInfo").classList.add("active");
                document.getElementById("breadcrumbContactInfo").classList.remove("active");

                $("#sectionContactInfo")
                    .transition({
                        animation: "scale",
                        onComplete: function () {
                            document.getElementById("sectionContactInfo").classList.add("display", "none");
                            document.getElementById("sectionLoginInfo").classList.remove("display", "none");

                            $("#sectionLoginInfo").transition("scale");
                        }
                    });
            });

        $("#breadcrumbContactInfo, #buttonLoginInfoNext")
            .click(function () {
                if (sectionState === "contact")
                    return;

                sectionState = "contact";

                document.getElementById("breadcrumbContactInfo").classList.add("active");
                document.getElementById("breadcrumbLoginInfo").classList.remove("active");

                $("#sectionLoginInfo")
                    .transition({
                        animation: "scale",
                        onComplete: function () {
                            document.getElementById("sectionLoginInfo").classList.add("display", "none");
                            document.getElementById("sectionContactInfo").classList.remove("display", "none");

                            $("#sectionContactInfo").transition("scale");
                        }
                    });
            });
    </script>
}