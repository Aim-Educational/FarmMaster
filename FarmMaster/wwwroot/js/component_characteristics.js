import { FarmAjax, FarmAjaxMessageType } from "./farm_ajax.js";
export var ComponentCharacteristicsValueType;
(function (ComponentCharacteristicsValueType) {
    ComponentCharacteristicsValueType[ComponentCharacteristicsValueType["Error_Unknown"] = 0] = "Error_Unknown";
    ComponentCharacteristicsValueType[ComponentCharacteristicsValueType["TimeSpan"] = 1] = "TimeSpan";
    ComponentCharacteristicsValueType[ComponentCharacteristicsValueType["Text"] = 2] = "Text";
})(ComponentCharacteristicsValueType || (ComponentCharacteristicsValueType = {}));
export class ComponentCharacteristicsValue {
    constructor() {
        this.name = "";
        this.type = ComponentCharacteristicsValueType.Error_Unknown;
        this.value = null;
        this.isInherited = false;
    }
}
export class ComponentCharacteristics {
    static getValuesAjax(boxError, divSegment, table, funcDelete, ajaxUrl, type, id) {
        if (divSegment !== null)
            divSegment.classList.add("loading");
        FarmAjax.postWithMessageAndValueResponse(ajaxUrl, { type: type, id: id }, responseAndValue => {
            if (divSegment !== null)
                divSegment.classList.remove("loading");
            if (responseAndValue.messageType !== FarmAjaxMessageType.None) {
                if (boxError !== null)
                    responseAndValue.populateMessageBox(boxError);
                return;
            }
            let tbody = table.tBodies.item(0);
            tbody.innerHTML = "";
            for (let characteristic of responseAndValue.value) {
                ComponentCharacteristics.addValue(table, funcDelete, characteristic);
            }
        });
    }
    static addValue(table, funcDelete, value) {
        let tbody = table.tBodies.item(0);
        let tr = document.createElement("tr");
        tbody.appendChild(tr);
        if (value.isInherited)
            tr.classList.add("grey");
        let tdName = document.createElement("td");
        tdName.innerText = value.name;
        tr.appendChild(tdName);
        let tdType = document.createElement("td");
        tr.appendChild(tdType);
        let tdValue = document.createElement("td");
        tr.appendChild(tdValue);
        let tdActions = document.createElement("td");
        tr.appendChild(tdActions);
        if (value.isInherited) {
            let msgInherited = document.createElement("div");
            msgInherited.classList.add("ui", "message", "transition", "visible");
            msgInherited.innerText = "Inherited";
            tdActions.appendChild(msgInherited);
        }
        else {
            let btnDelete = document.createElement("button");
            btnDelete.classList.add("ui", "secondary", "button");
            btnDelete.innerText = "Delete";
            btnDelete.onclick = () => funcDelete(value);
            tdActions.appendChild(btnDelete);
        }
        let div = document.createElement("div");
        div.classList.add("ui", "form");
        tdValue.appendChild(div);
        if (value.isInherited)
            div.classList.add("disabled");
        switch (value.type) {
            case ComponentCharacteristicsValueType.TimeSpan:
                tdType.innerText = "TimeSpan";
                var input = document.createElement("input");
                input.type = "text";
                input.placeholder = "#d #m #s";
                input.value = value.value;
                input.disabled = value.isInherited;
                if (input.disabled)
                    input.classList.add("ui", "disabled", "input");
                div.appendChild(input);
                break;
            case ComponentCharacteristicsValueType.Text:
                tdType.innerText = "Text";
                var input = document.createElement("input");
                input.type = "text";
                input.placeholder = "Text";
                input.value = value.value;
                input.disabled = value.isInherited;
                if (input.disabled)
                    input.classList.add("ui", "disabled", "input");
                div.appendChild(input);
                break;
            default: break;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50X2NoYXJhY3RlcmlzdGljcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL1NjcmlwdHMvY29tcG9uZW50X2NoYXJhY3RlcmlzdGljcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLG1CQUFtQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFL0QsTUFBTSxDQUFOLElBQVksaUNBSVg7QUFKRCxXQUFZLGlDQUFpQztJQUN6QywyR0FBYSxDQUFBO0lBQ2IsaUdBQVEsQ0FBQTtJQUNSLHlGQUFJLENBQUE7QUFDUixDQUFDLEVBSlcsaUNBQWlDLEtBQWpDLGlDQUFpQyxRQUk1QztBQUVELE1BQU0sT0FBTyw2QkFBNkI7SUFBMUM7UUFDVyxTQUFJLEdBQVcsRUFBRSxDQUFDO1FBQ2xCLFNBQUksR0FBc0MsaUNBQWlDLENBQUMsYUFBYSxDQUFDO1FBQzFGLFVBQUssR0FBUSxJQUFJLENBQUM7UUFDbEIsZ0JBQVcsR0FBWSxLQUFLLENBQUM7SUFDeEMsQ0FBQztDQUFBO0FBRUQsTUFBTSxPQUFPLHdCQUF3QjtJQUMxQixNQUFNLENBQUMsYUFBYSxDQUN2QixRQUErQixFQUMvQixVQUFpQyxFQUNqQyxLQUF1QixFQUN2QixVQUEwRCxFQUMxRCxPQUFlLEVBQ2YsSUFBWSxFQUNaLEVBQVU7UUFFVixJQUFJLFVBQVUsS0FBSyxJQUFJO1lBQ25CLFVBQVUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRXhDLFFBQVEsQ0FBQywrQkFBK0IsQ0FDcEMsT0FBTyxFQUNQLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQ3RCLGdCQUFnQixDQUFDLEVBQUU7WUFDZixJQUFJLFVBQVUsS0FBSyxJQUFJO2dCQUNuQixVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUUzQyxJQUFJLGdCQUFnQixDQUFD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RSxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ25FLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3ZCLE1BQU07WUFFVixPQUFPLENBQUMsQ0FBQyxNQUFNO1NBQ2xCO0lBQ0wsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFybUFqYXgsIEZhcm1BamF4TWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9mYXJtX2FqYXguanNcIjtcclxuXHJcbmV4cG9ydCBlbnVtIENvbXBvbmVudENoYXJhY3RlcmlzdGljc1ZhbHVlVHlwZSB7XHJcbiAgICBFcnJvcl9Vbmtub3duLFxyXG4gICAgVGltZVNwYW4sXHJcbiAgICBUZXh0XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb21wb25lbnRDaGFyYWN0ZXJpc3RpY3NWYWx1ZSB7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nID0gXCJcIjtcclxuICAgIHB1YmxpYyB0eXBlOiBDb21wb25lbnRDaGFyYWN0ZXJpc3RpY3NWYWx1ZVR5cGUgPSBDb21wb25lbnRDaGFyYWN0ZXJpc3RpY3NWYWx1ZVR5cGUuRXJyb3JfVW5rbm93bjtcclxuICAgIHB1YmxpYyB2YWx1ZTogYW55ID0gbnVsbDtcclxuICAgIHB1YmxpYyBpc0luaGVyaXRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50Q2hhcmFjdGVyaXN0aWNzIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VmFsdWVzQWpheChcclxuICAgICAgICBib3hFcnJvcjogSFRNTERpdkVsZW1lbnQgfCBudWxsLFxyXG4gICAgICAgIGRpdlNlZ21lbnQ6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCxcclxuICAgICAgICB0YWJsZTogSFRNTFRhYmxlRWxlbWVudCxcclxuICAgICAgICBmdW5jRGVsZXRlOiAodmFsdWU6IENvbXBvbmVudENoYXJhY3RlcmlzdGljc1ZhbHVlKSA9PiB2b2lkLFxyXG4gICAgICAgIGFqYXhVcmw6IHN0cmluZyxcclxuICAgICAgICB0eXBlOiBzdHJpbmcsXHJcbiAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgKSB7XHJcbiAgICAgICAgaWYgKGRpdlNlZ21lbnQgIT09IG51bGwpXHJcbiAgICAgICAgICAgIGRpdlNlZ21lbnQuY2xhc3NMaXN0LmFkZChcImxvYWRpbmdcIik7XHJcblxyXG4gICAgICAgIEZhcm1BamF4LnBvc3RXaXRoTWVzc2FnZUFuZFZhbHVlUmVzcG9uc2U8Q29tcG9uZW50Q2hhcmFjdGVyaXN0aWNzVmFsdWVbXT4oXHJcbiAgICAgICAgICAgIGFqYXhVcmwsXHJcbiAgICAgICAgICAgIHsgdHlwZTogdHlwZSwgaWQ6IGlkIH0sXHJcbiAgICAgICAgICAgIHJlc3BvbnNlQW5kVmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpdlNlZ21lbnQgIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgZGl2U2VnbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibG9hZGluZ1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VBbmRWYWx1ZS5tZXNzYWdlVHlwZSAhPT0gRmFybUFqYXhNZXNzYWdlVHlwZS5Ob25lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJveEVycm9yICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUFuZFZhbHVlLnBvcHVsYXRlTWVzc2FnZUJveChib3hFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCB0Ym9keSA9IHRhYmxlLnRCb2RpZXMuaXRlbSgwKSE7XHJcbiAgICAgICAgICAgICAgICB0Ym9keS5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGNoYXJhY3RlcmlzdGljIG9mIHJlc3BvbnNlQW5kVmFsdWUudmFsdWUhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50Q2hhcmFjdGVyaXN0aWNzLmFkZFZhbHVlKHRhYmxlLCBmdW5jRGVsZXRlLCBjaGFyYWN0ZXJpc3RpYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkVmFsdWUoXHJcbiAgICAgICAgdGFibGU6IEhUTUxUYWJsZUVsZW1lbnQsXHJcbiAgICAgICAgZnVuY0RlbGV0ZTogKHZhbHVlOiBDb21wb25lbnRDaGFyYWN0ZXJpc3RpY3NWYWx1ZSkgPT4gdm9pZCxcclxuICAgICAgICB2YWx1ZTogQ29tcG9uZW50Q2hhcmFjdGVyaXN0aWNzVmFsdWVcclxuICAgICkge1xyXG4gICAgICAgIGxldCB0Ym9keSA9IHRhYmxlLnRCb2RpZXMuaXRlbSgwKSE7XHJcblxyXG4gICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XHJcbiAgICAgICAgaWYgKHZhbHVlLmlzSW5oZXJpdGVkKVxyXG4gICAgICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKFwiZ3JleVwiKTtcclxuXHJcbiAgICAgICAgbGV0IHRkTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICB0ZE5hbWUuaW5uZXJUZXh0ID0gdmFsdWUubmFtZTtcclxuICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZE5hbWUpO1xyXG5cclxuICAgICAgICBsZXQgdGRUeXBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkVHlwZSk7XHJcblxyXG4gICAgICAgIGxldCB0ZFZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkVmFsdWUpO1xyXG5cclxuICAgICAgICBsZXQgdGRBY3Rpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkQWN0aW9ucyk7XHJcblxyXG4gICAgICAgIGlmICh2YWx1ZS5pc0luaGVyaXRlZCkge1xyXG4gICAgICAgICAgICBsZXQgbXNnSW5oZXJpdGVkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgbXNnSW5oZXJpdGVkLmNsYXNzTGlzdC5hZGQoXCJ1aVwiLCBcIm1lc3NhZ2VcIiwgXCJ0cmFuc2l0aW9uXCIsIFwidmlzaWJsZVwiKTtcclxuICAgICAgICAgICAgbXNnSW5oZXJpdGVkLmlubmVyVGV4dCA9IFwiSW5oZXJpdGVkXCI7XHJcbiAgICAgICAgICAgIHRkQWN0aW9ucy5hcHBlbmRDaGlsZChtc2dJbmhlcml0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGJ0bkRlbGV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIGJ0bkRlbGV0ZS5jbGFzc0xpc3QuYWRkKFwidWlcIiwgXCJzZWNvbmRhcnlcIiwgXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIGJ0bkRlbGV0ZS5pbm5lclRleHQgPSBcIkRlbGV0ZVwiO1xyXG4gICAgICAgICAgICBidG5EZWxldGUub25jbGljayA9ICgpID0+IGZ1bmNEZWxldGUodmFsdWUpO1xyXG4gICAgICAgICAgICB0ZEFjdGlvbnMuYXBwZW5kQ2hpbGQoYnRuRGVsZXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwidWlcIiwgXCJmb3JtXCIpO1xyXG4gICAgICAgIHRkVmFsdWUuYXBwZW5kQ2hpbGQoZGl2KTtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlLmlzSW5oZXJpdGVkKVxyXG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHZhbHVlLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDb21wb25lbnRDaGFyYWN0ZXJpc3RpY3NWYWx1ZVR5cGUuVGltZVNwYW46XHJcbiAgICAgICAgICAgICAgICB0ZFR5cGUuaW5uZXJUZXh0ID0gXCJUaW1lU3BhblwiO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gXCIjZCAjbSAjc1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlucHV0LmRpc2FibGVkID0gdmFsdWUuaXNJbmhlcml0ZWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGlzYWJsZWQpIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJ1aVwiLCBcImRpc2FibGVkXCIsIFwiaW5wdXRcIik7XHJcbiAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENvbXBvbmVudENoYXJhY3RlcmlzdGljc1ZhbHVlVHlwZS5UZXh0OlxyXG4gICAgICAgICAgICAgICAgdGRUeXBlLmlubmVyVGV4dCA9IFwiVGV4dFwiO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gXCJUZXh0XCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuZGlzYWJsZWQgPSB2YWx1ZS5pc0luaGVyaXRlZDtcclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kaXNhYmxlZCkgaW5wdXQuY2xhc3NMaXN0LmFkZChcInVpXCIsIFwiZGlzYWJsZWRcIiwgXCJpbnB1dFwiKTtcclxuICAgICAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==