var controls=function(e){var t={};function s(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=11)}({11:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"control-window"},[t("header",[t("h1",[this._v(this._s(this.title))])]),this._v(" "),t("div",{staticClass:"content"},[this._t("default")],2)])};function i(e,t,s,r,i,o,n,l){var a,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=a):i&&(a=l?function(){i.call(this,this.$root.$options.shadowRoot)}:i),a)if(c.functional){c._injectStyles=a;var u=c.render;c.render=function(e,t){return a.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,a):[a]}return{exports:e,options:c}}r._withStripped=!0;var o=i({props:{title:String}},r,[],!1,null,null,null);o.options.__file="Scripts/Components/window.vue";var n=o.exports,l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return"edit"===e.mode?s("input",{staticClass:"farm-master",attrs:{name:e.name,type:e.type,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}):s("div",[e._v("\n    "+e._s(this.value)+"\n")])};l._withStripped=!0;var a=i({props:{isPassword:Boolean,name:String,placeholder:String,value:String,mode:{type:String,default:"edit",validator:e=>-1!==["edit","view"].indexOf(e)}},computed:{type(){return this.isPassword?"password":"text"}}},l,[],!1,null,null,null);a.options.__file="Scripts/Components/textbox.vue";var c=a.exports,u=function(){var e,t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"alert",class:(e={},e[this.type]=!0,e.show=!this.closed,e)},[s("div",{staticClass:"content"},[this._t("default")],2),this._v(" "),s("div",{staticClass:"close",on:{click:this.toggle}},[s("i",{staticClass:"las la-times"})])])};u._withStripped=!0;var d=i({data:function(){return{closed:!1}},props:{type:{type:String,required:!0,validator:function(e){return-1!==["error","info"].indexOf(e)}},show:{type:Boolean,default:!1}},methods:{toggle(){this.closed=!this.closed}},created(){this.closed=!this.show}},u,[],!1,null,null,null);d.options.__file="Scripts/Components/alert.vue";var h=d.exports,m=function(){var e=this,t=e.$createElement;return(e._self._c||t)("fm-table",e._g({attrs:{rows:e.rows,selection:e.selection,values:e.sortedValues},on:{sort:e.onSort},scopedSlots:e._u([{key:"tfoot",fn:function(){return[e._t("tfoot")]},proxy:!0}],null,!0)},e.$listeners))};m._withStripped=!0;var p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("table",[s("thead",[s("tr",["none"!==e.selection?s("th",{staticStyle:{"max-width":"60px"}},["multiple"===e.selection?s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectAll,expression:"selectAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectAll)?e._i(e.selectAll,null)>-1:e.selectAll},on:{change:function(t){var s=e.selectAll,r=t.target,i=!!r.checked;if(Array.isArray(s)){var o=e._i(s,null);r.checked?o<0&&(e.selectAll=s.concat([null])):o>-1&&(e.selectAll=s.slice(0,o).concat(s.slice(o+1)))}else e.selectAll=i}}}):e._e()]):e._e(),e._v(" "),e._l(e.rows,(function(t){return s("th",{key:t.name+t.bind,style:{width:e.rowWidth}},[e._v("\n                "+e._s(t.name)+"\n                \n                "),t.sort?s("div",{staticClass:"sort",attrs:{"data-name":t.name},on:{click:e.onSortRow}},[s("i",{staticClass:"las",class:{"la-minus":!e.isRowSorted(t),"la-arrow-down":e.isRowSorted(t)&&!e.isRowSortedAsc(t),"la-arrow-up":e.isRowSorted(t)&&e.isRowSortedAsc(t)}})]):e._e()])}))],2)]),e._v(" "),s("tbody",e._l(e.values,(function(t,r){return s("tr",{key:r},["none"!==e.selection?s("td",{staticStyle:{"max-width":"60px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedValueIndicies[r],expression:"selectedValueIndicies[index]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectedValueIndicies[r])?e._i(e.selectedValueIndicies[r],null)>-1:e.selectedValueIndicies[r]},on:{change:[function(t){var s=e.selectedValueIndicies[r],i=t.target,o=!!i.checked;if(Array.isArray(s)){var n=e._i(s,null);i.checked?n<0&&e.$set(e.selectedValueIndicies,r,s.concat([null])):n>-1&&e.$set(e.selectedValueIndicies,r,s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.selectedValueIndicies,r,o)},function(t){return e.onValueChecked(r)}]}})]):e._e(),e._v(" "),e._l(e.rows,(function(i){return s("td",{key:i.name+r+i.bind},[t[i.bind]&&t[i.bind].href?s("a",{attrs:{href:t[i.bind].href}},[e._v("\n                    "+e._s(t[i.bind].value)+"\n                ")]):[e._v("\n                    "+e._s(t[i.bind])+"\n                ")]],2)}))],2)})),0),e._v(" "),s("tfoot",[s("tr",[e._t("tfoot")],2)])])};p._withStripped=!0;var f=i({data:()=>({sortedRow:{row:null,asc:!1},selectedValueIndicies:[],selectAll:!1,ignoreNextSelectAll:!1}),props:{rows:{type:Array,required:!0},values:Array,selection:{type:String,default:"none",validator:function(e){return-1!==["none","single","multiple"].indexOf(e)}}},created(){for(const e of this.rows)if(e.sortByDefault){this.sortedRow.row=e,this.sortedRow.asc="asc"===e.sortByDefault,this.$emit("sort",{row:e,asc:this.sortedRow.asc});break}},watch:{selectAll(e,t){if(this.ignoreNextSelectAll)this.ignoreNextSelectAll=!1;else{for(let t=0;t<this.values.length;t++)this.selectedValueIndicies[t]=e;this.$emit("selected",{triggerValue:null,selectedValues:e?this.values:[]})}}},computed:{rowWidth(){return Math.round(100/this.rows.length)+"%"},selectedValues(){return this.values.filter((e,t)=>this.selectedValueIndicies[t])}},methods:{isRowSorted(e){return this.sortedRow.row===e},isRowSortedAsc(e){return this.isRowSorted(e)&&this.sortedRow.asc},onSortRow(e){let t=e.target;t.dataset.name||(t=t.parentNode);const s=t.dataset.name,r=this.sortedRow.row;this.sortedRow.row=this.rows[this.rows.findIndex(e=>e.name===s)],r!==this.sortedRow.row?this.sortedRow.asc=!1:this.sortedRow.asc?this.sortedRow.row=null:this.sortedRow.asc=!0;for(let e=0;e<this.selectedValueIndicies.length;e++)this.selectedValueIndicies[e]=!1;this.selectAll&&(this.ignoreNextSelectAll=!0),this.selectAll=!1,this.$emit("selected",{triggerValue:null,selectedValues:[]}),this.$emit("sort",{row:this.sortedRow.row,asc:this.sortedRow.asc})},onValueChecked(e){if("multiple"==this.selection){let e=this.selectedValueIndicies.length===this.values.length;if(e)for(let t=0;t<this.selectedValueIndicies.length;t++)if(!this.selectedValueIndicies[t]){e=!1;break}e!==this.selectAll&&(this.ignoreNextSelectAll=!0,this.selectAll=e)}if("single"===this.selection)for(let t=0;t<this.selectedValueIndicies.length;t++)t!==e&&(this.selectedValueIndicies[t]=!1);this.$emit("selected",{triggerValue:e>0?this.values[e]:null,selectedValues:this.selectedValues})}},util:{getRowValue(e,t){let s=e[t.bind];return s&&s.value&&(s=s.value),s},sortRowValue:(e,t,s)=>"function"==typeof s.sort?s.sort(e,t):e<t}},p,[],!1,null,null,null);f.options.__file="Scripts/Components/table_base.vue";var v=f.exports,_=i({props:{rows:v.props.rows,selection:v.props.selection,values:Array},data:function(){return{sortedValues:[]}},methods:{onSort(e){this.sortedValues=this.values.slice(),e.row&&(this.sortedValues.sort((t,s)=>{let r=v.util.getRowValue(t,e.row),i=v.util.getRowValue(s,e.row);return v.util.sortRowValue(r,i,e.row)}),e.asc||this.sortedValues.reverse())}},created(){this.sortedValues=this.values},components:{"fm-table":v}},m,[],!1,null,null,null);_.options.__file="Scripts/Components/table_values.vue";var w=_.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editor-permissions"},[s("alert",{staticClass:"bottom margined",class:{show:e.errors.length>0},attrs:{type:"error"}},[s("header",[e._v("Error")]),e._v(" "),s("ul",e._l(e.errors,(function(t){return s("li",{key:t},[e._v("\n                   "+e._s(t)+"\n                ")])})),0)]),e._v(" "),s("alert",{staticClass:"bottom margined",attrs:{type:"info",show:""}},[s("header",[e._v("Note")]),e._v(" "),s("p",[e._v("\n            Users will have to sign out, then log back in before their new permissions take affect.\n        ")])]),e._v(" "),e._l(e.allPermissions,(function(t){return s("div",{key:t,staticClass:"perm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.myPermissions,expression:"myPermissions"}],attrs:{type:"checkbox",disabled:"view"===e.mode},domProps:{value:t,checked:Array.isArray(e.myPermissions)?e._i(e.myPermissions,t)>-1:e.myPermissions},on:{change:function(s){var r=e.myPermissions,i=s.target,o=!!i.checked;if(Array.isArray(r)){var n=t,l=e._i(r,n);i.checked?l<0&&(e.myPermissions=r.concat([n])):l>-1&&(e.myPermissions=r.slice(0,l).concat(r.slice(l+1)))}else e.myPermissions=o}}}),e._v(" "),s("label",[e._v(e._s(t))])])})),e._v(" "),"edit"==e.mode?s("button",{staticClass:"top margined blue fluid",on:{click:e.updatePerms}},[e._v("\n        Update permissions\n    ")]):e._e()],2)};y._withStripped=!0;var g=i({props:{mode:String,username:{type:String,required:!0}},data:function(){return{allPermissions:[],myPermissions:[],errors:[]}},created(){libs.Ajax.graphql("\n        query($username: String!) {\n            permissions\n            user(username:$username) {\n                permissions\n            }\n        }",{username:this.username}).then(e=>{this.allPermissions=e.permissions.sort(),this.myPermissions=e.user.permissions}).catch(e=>this.errors=e.errors)},methods:{updatePerms(){const e=this.allPermissions.filter(e=>-1!==this.myPermissions.indexOf(e)),t=this.allPermissions.filter(e=>-1===this.myPermissions.indexOf(e));libs.Ajax.graphql("\n            mutation($username: String!, $permsToAdd: [String]!, $permsToRemove: [String]!) {\n                user(username:$username) {\n                    grantPermissions(permissions:$permsToAdd)\n                    revokePermissions(permissions:$permsToRemove)\n                }\n            }",{username:this.username,permsToAdd:e,permsToRemove:t}).then(e=>(this.$emit("on-valid-update"),e)).catch(e=>{console.log(e),this.errors=e&&e.errors||[e.message]})}},components:{alert:h}},y,[],!1,null,null,null);g.options.__file="Scripts/Components/editor_permissions.vue";var S=g.exports,b=function(){var e=this.$createElement;return(this._self._c||e)("button",{on:{click:this.onClick,mouseout:this.onMouseOut}},[this._v("\n        "+this._s(this.buttonText)+"\n    ")])};b._withStripped=!0;var x=i({data:()=>({text:"",showConfirm:!1}),props:{prompt:String,confirm:String},computed:{buttonText(){return this.showConfirm?this.confirm:this.prompt}},methods:{onClick(e){this.showConfirm?(this.showConfirm=!1,this.$emit("click",e)):this.showConfirm=!0},onMouseOut(){this.showConfirm=!1}}},b,[],!1,null,null,null);x.options.__file="Scripts/Components/confirm_button.vue";var V=x.exports;Vue.component("window",n),Vue.component("textbox",c),Vue.component("alert",h),Vue.component("fm-value-table",w),Vue.component("editor-perms",S),Vue.component("confirm-button",V)}}).default;
//# sourceMappingURL=/js/controls.js.map