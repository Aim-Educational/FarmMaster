var controls=function(e){var t={};function s(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(i,o,function(t){return e[t]}.bind(null,o));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=11)}({11:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"control-window"},[t("header",[t("h1",[this._v(this._s(this.title))])]),this._v(" "),t("div",{staticClass:"content"},[this._t("default")],2)])};function o(e,t,s,i,o,n,r,l){var a,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),r?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=a):o&&(a=l?function(){o.call(this,this.$root.$options.shadowRoot)}:o),a)if(c.functional){c._injectStyles=a;var d=c.render;c.render=function(e,t){return a.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,a):[a]}return{exports:e,options:c}}i._withStripped=!0;var n=o({props:{title:String}},i,[],!1,null,null,null);n.options.__file="Scripts/Components/window.vue";var r=n.exports,l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return"edit"===e.mode?s("input",{staticClass:"farm-master",attrs:{name:e.name,type:e.type,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}):s("div",[e._v("\n    "+e._s(this.value)+"\n")])};l._withStripped=!0;var a=o({props:{isPassword:Boolean,name:String,placeholder:String,value:String,mode:{type:String,default:"edit",validator:e=>-1!==["edit","view"].indexOf(e)}},computed:{type(){return this.isPassword?"password":"text"}}},l,[],!1,null,null,null);a.options.__file="Scripts/Components/textbox.vue";var c=a.exports,d=function(){var e,t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"alert",class:(e={},e[this.type]=!0,e.show=!this.closed,e)},[s("div",{staticClass:"content"},[this._t("default")],2),this._v(" "),s("div",{staticClass:"close",on:{click:this.toggle}},[s("i",{staticClass:"las la-times"})])])};d._withStripped=!0;var u=o({data:function(){return{closed:!1}},props:{type:{type:String,required:!0,validator:function(e){return-1!==["error","info"].indexOf(e)}},show:{type:Boolean,default:!1}},methods:{toggle(){this.closed=!this.closed}},created(){this.closed=!this.show}},d,[],!1,null,null,null);u.options.__file="Scripts/Components/alert.vue";var h=u.exports,p=function(){var e=this,t=e.$createElement;return(e._self._c||t)("fm-table",e._g({attrs:{rows:e.rows,selection:e.selection,values:e.sortedValues},on:{sort:e.onSort},scopedSlots:e._u([{key:"tfoot",fn:function(){return[e._t("tfoot")]},proxy:!0}],null,!0)},e.$listeners))};p._withStripped=!0;var m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("table",[s("thead",[s("tr",["none"!==e.selection?s("th",{staticStyle:{"max-width":"60px"}},["multiple"===e.selection?s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectAll,expression:"selectAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectAll)?e._i(e.selectAll,null)>-1:e.selectAll},on:{change:function(t){var s=e.selectAll,i=t.target,o=!!i.checked;if(Array.isArray(s)){var n=e._i(s,null);i.checked?n<0&&(e.selectAll=s.concat([null])):n>-1&&(e.selectAll=s.slice(0,n).concat(s.slice(n+1)))}else e.selectAll=o}}}):e._e()]):e._e(),e._v(" "),e._l(e.rows,(function(t){return s("th",{key:t.name+t.bind,style:{width:e.rowWidth}},[e._v("\n                "+e._s(t.name)+"\n                \n                "),t.sort?s("div",{staticClass:"sort",attrs:{"data-name":t.name},on:{click:e.onSortRow}},[s("i",{staticClass:"las",class:{"la-minus":!e.isRowSorted(t),"la-arrow-down":e.isRowSorted(t)&&!e.isRowSortedAsc(t),"la-arrow-up":e.isRowSorted(t)&&e.isRowSortedAsc(t)}})]):e._e()])}))],2)]),e._v(" "),s("tbody",e._l(e.values,(function(t,i){return s("tr",{key:i},["none"!==e.selection?s("td",{staticStyle:{"max-width":"60px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedValueIndicies[i],expression:"selectedValueIndicies[index]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectedValueIndicies[i])?e._i(e.selectedValueIndicies[i],null)>-1:e.selectedValueIndicies[i]},on:{change:[function(t){var s=e.selectedValueIndicies[i],o=t.target,n=!!o.checked;if(Array.isArray(s)){var r=e._i(s,null);o.checked?r<0&&e.$set(e.selectedValueIndicies,i,s.concat([null])):r>-1&&e.$set(e.selectedValueIndicies,i,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.selectedValueIndicies,i,n)},function(t){return e.onValueChecked(i)}]}})]):e._e(),e._v(" "),e._l(e.rows,(function(o){return s("td",{key:o.name+i+o.bind},[t[o.bind]&&t[o.bind].href?s("a",{attrs:{href:t[o.bind].href}},[e._v("\n                    "+e._s(t[o.bind].value)+"\n                ")]):[e._v("\n                    "+e._s(t[o.bind])+"\n                ")]],2)}))],2)})),0),e._v(" "),s("tfoot",[s("tr",[e._t("tfoot")],2)])])};m._withStripped=!0;var f=o({data:()=>({sortedRow:{row:null,asc:!1},selectedValueIndicies:[],selectAll:!1,ignoreNextSelectAll:!1}),props:{rows:{type:Array,required:!0},values:Array,selection:{type:String,default:"none",validator:function(e){return-1!==["none","single","multiple"].indexOf(e)}}},created(){for(const e of this.rows)if(e.sortByDefault){this.sortedRow.row=e,this.sortedRow.asc="asc"===e.sortByDefault,this.$emit("sort",{row:e,asc:this.sortedRow.asc});break}},watch:{selectAll(e,t){if(this.ignoreNextSelectAll)this.ignoreNextSelectAll=!1;else{for(let t=0;t<this.values.length;t++)this.selectedValueIndicies[t]=e;this.$emit("selected",{triggerValue:null,selectedValues:e?this.values:[]})}}},computed:{rowWidth(){return Math.round(100/this.rows.length)+"%"},selectedValues(){return this.values.filter((e,t)=>this.selectedValueIndicies[t])}},methods:{isRowSorted(e){return this.sortedRow.row===e},isRowSortedAsc(e){return this.isRowSorted(e)&&this.sortedRow.asc},onSortRow(e){let t=e.target;t.dataset.name||(t=t.parentNode);const s=t.dataset.name,i=this.sortedRow.row;this.sortedRow.row=this.rows[this.rows.findIndex(e=>e.name===s)],i!==this.sortedRow.row?this.sortedRow.asc=!1:this.sortedRow.asc?this.sortedRow.row=null:this.sortedRow.asc=!0;for(let e=0;e<this.selectedValueIndicies.length;e++)this.selectedValueIndicies[e]=!1;this.selectAll&&(this.ignoreNextSelectAll=!0),this.selectAll=!1,this.$emit("selected",{triggerValue:null,selectedValues:[]}),this.$emit("sort",{row:this.sortedRow.row,asc:this.sortedRow.asc})},onValueChecked(e){if("multiple"==this.selection){let e=this.selectedValueIndicies.length===this.values.length;if(e)for(let t=0;t<this.selectedValueIndicies.length;t++)if(!this.selectedValueIndicies[t]){e=!1;break}e!==this.selectAll&&(this.ignoreNextSelectAll=!0,this.selectAll=e)}if("single"===this.selection)for(let t=0;t<this.selectedValueIndicies.length;t++)t!==e&&(this.selectedValueIndicies[t]=!1);this.$emit("selected",{triggerValue:e>0?this.values[e]:null,selectedValues:this.selectedValues})}},util:{getRowValue(e,t){let s=e[t.bind];return s&&s.value&&(s=s.value),s},sortRowValue:(e,t,s)=>"function"==typeof s.sort?s.sort(e,t):e<t}},m,[],!1,null,null,null);f.options.__file="Scripts/Components/table_base.vue";var v=f.exports,_=o({props:{rows:v.props.rows,selection:v.props.selection,values:Array},data:function(){return{sortedValues:[]}},methods:{onSort(e){this.sortedValues=this.values.slice(),e.row&&(this.sortedValues.sort((t,s)=>{let i=v.util.getRowValue(t,e.row),o=v.util.getRowValue(s,e.row);return v.util.sortRowValue(i,o,e.row)}),e.asc||this.sortedValues.reverse())}},created(){this.sortedValues=this.values},components:{"fm-table":v}},p,[],!1,null,null,null);_.options.__file="Scripts/Components/table_values.vue";var w=_.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editor-permissions"},[s("alert",{staticClass:"bottom margined",class:{show:e.errors.length>0},attrs:{type:"error"}},[s("header",[e._v("Error")]),e._v(" "),s("ul",e._l(e.errors,(function(t){return s("li",{key:t},[e._v("\n                   "+e._s(t)+"\n                ")])})),0)]),e._v(" "),s("alert",{staticClass:"bottom margined",attrs:{type:"info",show:""}},[s("header",[e._v("Note")]),e._v(" "),s("p",[e._v("\n            Users will have to sign out, then log back in before their new permissions take affect.\n        ")])]),e._v(" "),e._l(e.allPermissions,(function(t){return s("div",{key:t,staticClass:"perm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.myPermissions,expression:"myPermissions"}],attrs:{type:"checkbox",disabled:"view"===e.mode},domProps:{value:t,checked:Array.isArray(e.myPermissions)?e._i(e.myPermissions,t)>-1:e.myPermissions},on:{change:function(s){var i=e.myPermissions,o=s.target,n=!!o.checked;if(Array.isArray(i)){var r=t,l=e._i(i,r);o.checked?l<0&&(e.myPermissions=i.concat([r])):l>-1&&(e.myPermissions=i.slice(0,l).concat(i.slice(l+1)))}else e.myPermissions=n}}}),e._v(" "),s("label",[e._v(e._s(t))])])})),e._v(" "),"edit"==e.mode?s("button",{staticClass:"top margined blue fluid",on:{click:e.updatePerms}},[e._v("\n        Update permissions\n    ")]):e._e()],2)};g._withStripped=!0;var y=o({props:{mode:String,username:{type:String,required:!0}},data:function(){return{allPermissions:[],myPermissions:[],errors:[]}},created(){libs.Ajax.graphql("\n        query($username: String!) {\n            permissions\n            user(username:$username) {\n                permissions\n            }\n        }",{username:this.username}).then(e=>{this.allPermissions=e.permissions.sort(),this.myPermissions=e.user.permissions}).catch(e=>this.errors=e.errors)},methods:{updatePerms(){const e=this.allPermissions.filter(e=>-1!==this.myPermissions.indexOf(e)),t=this.allPermissions.filter(e=>-1===this.myPermissions.indexOf(e));libs.Ajax.graphql("\n            mutation($username: String!, $permsToAdd: [String]!, $permsToRemove: [String]!) {\n                user(username:$username) {\n                    grantPermissions(permissions:$permsToAdd)\n                    revokePermissions(permissions:$permsToRemove)\n                }\n            }",{username:this.username,permsToAdd:e,permsToRemove:t}).then(e=>(this.$emit("on-valid-update"),e)).catch(e=>{console.log(e),this.errors=e&&e.errors||[e.message]})}},components:{alert:h}},g,[],!1,null,null,null);y.options.__file="Scripts/Components/editor_permissions.vue";var S=y.exports,x=function(){var e=this.$createElement;return(this._self._c||e)("button",{on:{click:this.onClick,mouseout:this.onMouseOut}},[this._v("\n        "+this._s(this.buttonText)+"\n    ")])};x._withStripped=!0;var b=o({data:()=>({text:"",showConfirm:!1}),props:{prompt:String,confirm:String},computed:{buttonText(){return this.showConfirm?this.confirm:this.prompt}},methods:{onClick(e){this.showConfirm?(this.showConfirm=!1,this.$emit("click",e)):this.showConfirm=!0},onMouseOut(){this.showConfirm=!1}}},x,[],!1,null,null,null);b.options.__file="Scripts/Components/confirm_button.vue";var C=b.exports,V=function(){var e=this.$createElement;return(this._self._c||e)("button",{on:{click:this.onClick}},[this._v("\n    "+this._s(this.buttonText)+"\n")])};V._withStripped=!0;var k=o({data:()=>({toggled:!1}),props:{untoggledText:String,toggledText:String,value:Boolean},computed:{buttonText(){return this.toggled?this.toggledText:this.untoggledText}},methods:{onClick(e){this.toggled=!this.toggled,this.$emit("input",this.toggled)}},created(){this.toggled=this.value}},V,[],!1,null,null,null);k.options.__file="Scripts/Components/toggle_button.vue";var A=k.exports,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-background",class:{hidden:!e.isShowing},on:{click:function(t){return e.hide()}}},[s("div",{staticClass:"modal",on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"header"},[e._t("header")],2),e._v(" "),s("div",{staticClass:"body"},[e._t("body")],2),e._v(" "),s("div",{staticClass:"footer"},[e._t("footer")],2)])])};$._withStripped=!0;var R=o({data:()=>({isShowing:!1}),methods:{show(){this.isShowing=!0},hide(){this.isShowing=!1}},created(){document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isShowing&&this.hide()})}},$,[],!1,null,null,null);R.options.__file="Scripts/Components/modal.vue";var P=R.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("modal",{ref:"modal",scopedSlots:e._u([{key:"header",fn:function(){return[s("h2",[e._v("Delete")])]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticStyle:{"flex-direction":"column",display:"flex",width:"100%"}},[s("p",{staticStyle:{"margin-top":"0"}},[e._v("To delete this item, please enter DELETE into the box below.")]),e._v(" "),s("p",[e._v("THIS ACTION CANNOT BE UNDONE.")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.deleteText,expression:"deleteText"}],staticClass:"farm-master",attrs:{type:"text",placeholder:"Please enter DELETE"},domProps:{value:e.deleteText},on:{input:function(t){t.target.composing||(e.deleteText=t.target.value)}}})])]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"button-group"},[s("button",{on:{click:function(t){return e.hide()}}},[e._v("\n                Cancel\n            ")]),e._v(" "),s("button",{staticClass:"red",attrs:{disabled:"DELETE"!==e.deleteText},on:{click:function(t){return e.$emit("click",t)}}},[e._v("\n                Delete\n            ")])])]},proxy:!0}])})};T._withStripped=!0;var E=o({data:()=>({deleteText:""}),methods:{show(){this.$refs.modal.show()},hide(){this.$refs.modal.hide(),this.deleteText=""}},components:{modal:P}},T,[],!1,null,null,null);E.options.__file="Scripts/Components/delete_modal.vue";var I=E.exports;Vue.component("window",r),Vue.component("textbox",c),Vue.component("alert",h),Vue.component("fm-value-table",w),Vue.component("editor-perms",S),Vue.component("confirm-button",C),Vue.component("toggle-button",A),Vue.component("modal",P),Vue.component("delete-modal",I)}}).default;
//# sourceMappingURL=/js/controls.js.map